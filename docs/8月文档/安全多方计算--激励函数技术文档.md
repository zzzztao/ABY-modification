# 安全多方计算--激活函数技术文档

## Sigmoid函数

Sigmoid函数也叫Logistic函数，用于隐层神经元输出，取值范围为(0,1)，它可以将一个实数映射到(0,1)的区间，可以用来做二分类。在特征相差比较复杂或是相差不是特别大时效果比较好。

Sigmoid函数由下列公式定义：
$$
S(x) = \frac{1} {1 + e^{-x}}
$$


## Tanh函数

Tanh是双曲函数中的一个，tanh()为双曲正切。在数学中，双曲正切“tanh”是由基本双曲函数双曲正弦和双曲余弦推导而来。

Tanh函数由下列公式定义：
$$
S(x) = \frac{e^x-e^{-x}}{e^x+e^{-x}} = 2Sigmoid(2x) - 1
$$


## 安全计算中实现

若所有x都进行指数计算，开销很大，所以得限制x范围。以Sigmoid为例若x超过一定范围可直接让计算结果为0或者1，可以减少在安全多方计算中使用非线性函数。

在实现中将Sigmoid中x范围定在[-3, 3]，当x小于-3时直接让结果为0，大于3时结果为1.

而Tanh可以由Sigmoid线性变换而成，所以在Tanh中x范围为[-1.5, 1.5]，当x小于-1.5时直接让结果为-1，大于1.5时结果为1.



## 接口定义

```c++
//bitlen：输入值位数  s_n:需要计算值x  circ：电路（必须为布尔电路）
share* sigmoid(uint32_t bitlen, share* s_n, BooleanCircuit* circ){

}

//bitlen：输入值位数  s_n:需要计算值x  circ：电路（必须为布尔电路）
share* tanh(uint32_t bitlen, share* s_n, BooleanCircuit* circ){

}
```

